	var users = [{"status":"sucess","name":"Adriana Aguiar","id":118660},{"status":"sucess","name":"Alex Bernardes","id":109312},{"status":"sucess","name":"Alex Monteiro","id":109068},{"status":"sucess","name":"Aline Manicure","id":111776},{"status":"sucess","name":"Aline Santana A","id":109099},{"status":"sucess","name":"Amanda Mesquita","id":109322},{"status":"sucess","name":"Ana Maria","id":109333},{"status":"sucess","name":"Ana Maria Manic","id":109301},{"status":"sucess","name":"Ana Paula Arrud","id":109308},{"status":"sucess","name":"Ana Paula Fisio","id":109244},{"status":"sucess","name":"Ana Paula Santo","id":109334},{"status":"sucess","name":"Aninha Ana Apul","id":109304},{"status":"sucess","name":"Camila Rafaela ","id":112975},{"status":"sucess","name":"Carboxiterapia","id":109379},{"status":"sucess","name":"Carboxterapia","id":109381},{"status":"sucess","name":"Carla","id":109302},{"status":"sucess","name":"Cintia (serviç","id":109332},{"status":"sucess","name":"Cleo","id":109173},{"status":"sucess","name":"Daniele Cristin","id":109098},{"status":"sucess","name":"Desiree Pamela ","id":109101},{"status":"sucess","name":"Diana Carla Sev","id":109175},{"status":"sucess","name":"do Carmo Maria ","id":109122},{"status":"sucess","name":"Elianara Freita","id":112053},{"status":"sucess","name":"Eliane de Fatim","id":109313},{"status":"sucess","name":"Eliete Beltrã","id":109215},{"status":"sucess","name":"Ggrazielle","id":109190},{"status":"sucess","name":"Gilda Maria de ","id":109063},{"status":"sucess","name":"Ieda Sales","id":109060},{"status":"sucess","name":"Jac Jacqueline","id":109289},{"status":"sucess","name":"Jacqueline de C","id":109119},{"status":"sucess","name":"Jane Lucia de A","id":109065},{"status":"sucess","name":"Jessica","id":112937},{"status":"sucess","name":"Jjoyce Estefani","id":109158},{"status":"sucess","name":"Joanna","id":109307},{"status":"sucess","name":"Juliana Isabel ","id":109306},{"status":"sucess","name":"Karina Lousada","id":109127},{"status":"sucess","name":"Karine graziel","id":109323},{"status":"sucess","name":"Katia","id":109257},{"status":"sucess","name":"Kletli","id":109292},{"status":"sucess","name":"Larissa Sales","id":109297},{"status":"sucess","name":"Laser","id":109082},{"status":"sucess","name":"Leo leonilda p","id":109083},{"status":"sucess","name":"Lipocavitação","id":109377},{"status":"sucess","name":"Lipocavitação","id":109376},{"status":"sucess","name":"Lorena Sales S","id":109135},{"status":"sucess","name":"Madalena Maria","id":109239},{"status":"sucess","name":"Mara","id":109314},{"status":"sucess","name":"Marcos Antonio ","id":109329},{"status":"sucess","name":"Maria ( manicu","id":109152},{"status":"sucess","name":"Maria Geralda","id":109326},{"status":"sucess","name":"Meire","id":109115},{"status":"sucess","name":"Michele","id":111555},{"status":"sucess","name":"Miriam de Souza","id":109222},{"status":"sucess","name":"Monica de Freit","id":118216},{"status":"sucess","name":"Nelia de Souza ","id":109188},{"status":"sucess","name":"Patricia","id":109088},{"status":"sucess","name":"Patricia Esteti","id":109223},{"status":"sucess","name":"Paula Isabel d","id":109090},{"status":"sucess","name":"Paula Nutricio","id":109121},{"status":"sucess","name":"Photon Dome","id":109337},{"status":"sucess","name":"Pierre","id":110102},{"status":"sucess","name":"Power Bronze","id":109957},{"status":"sucess","name":"Raquel Barreto ","id":109129},{"status":"sucess","name":"Regiane Miranda","id":111630},{"status":"sucess","name":"Rosangela","id":109291},{"status":"sucess","name":"Rosemary Virgin","id":110832},{"status":"sucess","name":"Rose Rocha Cabe","id":109136},{"status":"sucess","name":"Rrose Santos","id":109097},{"status":"sucess","name":"Rute Mary Iris ","id":109102},{"status":"sucess","name":"Susi","id":109207},{"status":"sucess","name":"Telma de Jesus ","id":109217},{"status":"sucess","name":"Thiago Herinque","id":112587},{"status":"sucess","name":"Valeria","id":109062},{"status":"sucess","name":"Vania (servi","id":109303},{"status":"sucess","name":"Viviani Andrade","id":109325}, {"status":"sucess","name":"Mateus Freira","id":2}];

	var objects = [
		{"$lift_class": "treatment", "end": 1395489600, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 112937, "customer": 82577, "updatedAt": 1395525518, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": false, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395492000, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 112937, "customer": 82577, "updatedAt": 1395525533, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395495600, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 112937, "customer": 82577, "updatedAt": 1395525693, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395495600, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 109257, "customer": 82577, "updatedAt": 1395525715, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395489600, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 109257, "customer": 82577, "updatedAt": 1395525720, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395494400, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 109257, "customer": 82577, "updatedAt": 1395527255, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395490800, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 109257, "customer": 82577, "updatedAt": 1395603000, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""},
		{"$lift_class": "treatment", "end": 1395490800, "start": 1395488400, "status": 0, "command": "0", "id": 531775, "unit": 32, "user": 109188, "customer": 82577, "updatedAt": 1395603008, "createdAt": 1395525518, "customerOrigin": 82577, "hasDetail": true, "obs": "", "updatedBy": 2, "createdBy": 2, "dateEvent": 1395488400, "payment": null, "treatmentConflit": null, "detailTreatmentAsText": "Mini spa", "showInCalendar": true, "facebookEventId": ""}
	];
	var user_fields = ['user', 'createdBy', 'updatedBy'];
	var data_fields = ['updatedAt', 'createdAt', 'start', 'end'];
	var sholl_all = ['updatedBy'];

	var diffObj = function(origin, dest){
		var out = {};
		for(var i in dest){
			var all = (sholl_all.filter(function( field){ return i ==field;  }).length > 0);
			if(origin[i] != dest[i] || all){
				out[i] = dest[i];
			}
		}
		return out;
	};
	var buildFilter = function(filter){
		return function(item){
				return item == filter;
			};
	};
	var last = {};
	objects.map(function(item){
		var result = diffObj(last , item);
		last = item;
		for( var i in result){
			var filter = buildFilter(i);
			var isData = data_fields.filter(filter).length > 0;
			if(isData){
				result[i] = new Date(result[i]);
			}else {
				var isUser = user_fields.filter(filter).length > 0;
				if(isUser){
					var  user = users.filter(function(u){ return u.id == result[i]; })[0];
					if(user){
						result[i] = user || {};
					}
				}
			}
		}
		return result;
	});